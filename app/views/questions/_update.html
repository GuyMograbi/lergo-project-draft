<div>
	<span class="update-question-notifications" ng-show="!!showUsedByOthers() || !!canCopyAndOverride()">
		<span ng-show="!!showUsedByOthers()">
			{{ 'questions.usedByOthers' | i18n }}
			<span class="pop-up-hint">
				<span>
					<!--  tabindex = 0 is use to fix focus trigger problem in google chrome -->
					<button popover="{{'questions.usedByOthersHint' | i18n}}" class="fa fa-question-circle"
                  popover-placement="bottom" popover-trigger="focus"
                  tabindex="0"></button>
				</span>
			</span>
		</span>
		<span ng-show="!!canCopyAndOverride()">
			<span ng-show="!wantToEdit">
				{{ 'questions.notOwnerCannotEdit' | i18n }}
				<br/>
				<button class="btn btn-link" ng-click="wantToEdit=true">{{ 'questions.copyAndReplaceAction' | i18n }}</button>
				<br/>
			</span>
			<span ng-show="wantToEdit">
				{{ 'questions.copyAndReplacePrompt' | i18n }}
				<br/>
				<span class="options">
					<span class="option1">
						<button class="btn btn-link" ng-click="copyAndReplaceQuestion(quizItem)">{{
              'questions.copyAndReplacePromptConfirm' | i18n }}
            </button>
					</span>
					<span class="option2">
						<button class="btn btn-link" ng-click="wantToEdit=false">{{ 'questions.copyAndReplacePromptDecline' | i18n
              }}
            </button>
					</span>
				</span>
			</span>
		</span>
	</span>
</div>
<fieldset ng-disabled="!permissions.canEdit">
  <!-- http://stackoverflow.com/a/21638542/1068746 -->
  <div>
    <table class=" lergo-table lergo-form">
      <tbody>
      <tr>
        <td>{{ 'questions.question' | i18n }}</td>
        <td colspan="7">
          <input ng-model="quizItem.question"
                 placeholder="{{quizItem.type==='fillInTheBlanks' ? ('questions.fillInTheBlanks.hint' |i18n) : ('questions.questionHint' | i18n)}}"/>
        </td>
      </tr>
      <tr>
        <td>{{ 'questions.help' | i18n }}</td>
        <td colspan="7">
          <input placeholder="{{'questions.helpHint' | i18n}}" ng-model="quizItem.helpText"/>
        </td>
      </tr>
      <tr>
        <td>{{ 'questions.questionType' | i18n }}</td>
        <td>
          <select ng-model="quizItem.type"
                  ng-options="t.id as ('questions.types.' + t.id | i18n) for t in types"></select>
        </td>
        <td>{{ 'filters.labels.language' | i18n }}</td>
        <td>
          <select ng-model="quizItem.language"
                  ng-options="l.id as ('filters.languages.' + l.id | i18n) for l in languages"></select>
        </td>
        <td>{{ 'filters.labels.subject' | i18n }}</td>
        <td>
          <select ng-model="quizItem.subject"
                  ng-options="s as ('filters.subjects.' + s | i18n) for s in subjects"></select>
        </td>
        <td>{{ 'fromAge' | i18n }}</td>
        <td>
          <input type="number" min="4" max="18" step="1" size="2" ng-model="quizItem.age"/>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <div ng-include="getQuestionUpdateTemplate(quizItem)"></div>
  <table class="lergo-table lergo-form" ng-show="!!quizItem.question && !!quizItem.type">
    <tr>
      <td style="width: 17%">{{ 'tags' | i18n }}</td>
      <td>
        <div tag-section tags="quizItem.tags" tags-available="allAvailableTags"></div>
      </td>
    </tr>
  </table>
  <div class="advance-options">
    <div class="lergo-h1">
      <br>
      <button class="btn-link expander" ng-click="isCollapsed = !isCollapsed"
              ng-show="!!quizItem.question && !!quizItem.type">
        <i ng-show="!isCollapsed" class="fa fa-plus-square"></i>
        <i ng-show="!!isCollapsed" class="fa fa-minus-square"></i>
        {{ 'advancedOptions' | i18n }}
      </button>
    </div>
    <div collapse="!isCollapsed" ng-init="">
      <hr/>
      <table class=" lergo-table lergo-form">
        <tbody>
        <tr>
          <td style="width: 15%">{{ 'questions.addMedia' | i18n }}</td>
          <td style="width: 10%">
            <select ng-model="quizItem.media.type"
                    ng-options="m as ('questions.media.' + m | i18n) for m in ['audio','image']">
              <option value=""></option>
            </select>
          </td>
          <td>
            <div ng-show="!!quizItem.media" ng-include="getMediaTemplate(quizItem)"></div>
          </td>
        </tr>
        <tr>
          <td>{{ 'questions.addHint' | i18n }}</td>
          <td colspan="2">
            <input placeholder="{{'questions.hintHelpText' | i18n}}" ng-model="quizItem.hint"/>
          </td>
        </tr>
        <tr>
          <td>{{ 'questions.addExplanation' | i18n }}</td>
          <td colspan="2">
            <input placeholder="{{'questions.explanationHelpText' | i18n}}" ng-model="quizItem.explanation"/>
          </td>
        </tr>
        <tr>
          <td style="width: 15%">{{ 'questions.addExplanationMedia' | i18n }}</td>
          <td style="width: 10%">
            <select ng-model="quizItem.explanationMedia.type"
                    ng-options="m as ('questions.media.' + m | i18n) for m in ['audio','image','video']">
              <option value=""></option>
            </select>
          </td>
          <td>
            <div ng-show="!!quizItem.explanationMedia" ng-include="getExplanationMediaTemplate(quizItem)"></div>
          </td>
        </tr>
        <tr>
          <td>{{ 'questions.editSummary' | i18n }}</td>
          <td colspan="2">
            <input placeholder="{{'questions.editSummaryHelpText' | i18n}}" ng-model="quizItem.summary"/>
          </td>
        </tr>
        </tbody>
      </table>

      <div class="advance-options" ng-show="canShowExpPerAns(quizItem)">
        <div class="lergo-h1">
          <br>
          <button class="btn-link expander" ng-click="showExplanationPerAnswer = !showExplanationPerAnswer">
            <i ng-show="!showExplanationPerAnswer" class="fa fa-plus-square"></i>
            <i ng-show="!!showExplanationPerAnswer" class="fa fa-minus-square"></i>
            {{ 'showExplanationPerAnswer' | i18n }}
          </button>
        </div>
        <div collapse="!showExplanationPerAnswer">
          <table class=" lergo-table lergo-form">
            <thead>
            <tr>
              <td width="15%">{{ 'questions.possibleIncorrectAnswer' | i18n }}</td>
              <td>
                {{'questions.textExplanation' | i18n }}
              </td>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="option in quizItem.options">
              <td>{{option.label}}</td>
              <td>
                <input ng-model="option.textExplanation"/>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</fieldset>
