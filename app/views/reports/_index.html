<div id="reportIndex">
	<div class="lergo-label">
		<span class="errorMessage" ng-show='errorMessage' style="float: right; font-size: 15px; color: red;">{{errorMessage}}</span>
	</div>
	<br />


	<div class="page-content-width page-content-titles">
		<div class="page-content-body">

			<div class="lergo-h1">{{ 'reports.myReports' | i18n }} [ {{ 'reports.total' | i18n }}: {{systemStats.myReports + + systemStats.myInvitedReports }} ] <!-- LERGO-457--></div>
            <select class="report-type-selection" ng-model="reportsPage.reportType" ng-options="reportType.id as ( 'reports.type.' + reportType.id | i18n ) for reportType in reportTypes  ">
                <option>mine</option>
                <option>students</option>
            </select>
		</div>
		<div class="page-content-sidebar">
			<div class="lergo-h1">{{ 'reports.filter' | i18n }}</div>
		</div>
	</div>
	<div class="page-content-width">
		<div class="page-content-body">
			<table class="lergo-table">
				<thead>
					<tr>
						<td class="checkbox-dropdown">
							<div class="btn-group" dropdown>
								<input type="checkbox" ng-click="selectAll($event)">
								<button type="button" class="btn-link dropdown-toggle">
									<span class="caret"></span>
								</button>
								<ul class="dropdown-menu" role="menu">
									<li>
										<a class="btn-link" ng-click="deleteReports()">{{'delete'|i18n}}</a>
										<a class="btn-link" ng-click="createLessonFromWrongQuestions()">{{'report.CreateLessonFromWrongQuestions'|i18n}}</a>
									</li>
								</ul>
							</div>
						</td>
						<td>{{ 'name' | i18n }}</td>
						<td ng-show="showStudentColumn()">{{ 'reports.student' | i18n}}</td>
						<td>{{ 'reports.subject' | i18n}}</td>
						<td>{{ 'reports.takenAt' | i18n}}</td>
						<td>{{ 'reports.correctPercentage' | i18n }}</td>
						<td>{{ 'reports.duration'|i18n}}</td>
					</tr>
				</thead>
				<tbody>
					<tr
						ng-repeat="report in reports |orderBy:'-lastUpdate'">
						<td>
							<input type="checkbox" style="margin-left: 5px;" ng-model="report.selected">
						</td>
						<td class="name">
							<a ng-show="!!report.data.lesson.name && report.data.lesson.name.trim().length > 0" tooltip="{{'reports.tooltip.go' | i18n}}"
								ng-href="#!/public/lessons/reports/{{report._id}}/display">{{ report.data.lesson.name }}</a>
							<a ng-show="!report.data.lesson.name || report.data.lesson.name.trim().length <= 0" tooltip="{{'reports.tooltip.go' | i18n}}"
								ng-href="#!/public/lessons/reports/{{report._id}}/display">[ no title ]</a>
						</td>
						<td class="answer" ng-show="showStudentColumn()">{{report.data.invitee.name}}</td>
						<td class="answer">{{report.data.lesson.subject && ('filters.subjects.' + report.data.lesson.subject | i18n) ||""}}</td>
						<td class="answer">{{report.lastUpdate| date:'medium'}}</td>
						<td class="answer">{{report.correctPercentage}}</td>
						<td class="answer">{{report.duration|duration}}</td>
					</tr>
				</tbody>
			</table>
		</div>
        <div class="sidebar page-content-sidebar">
            <div lergo-filter model="reportsFilter" on-change="loadReports()" opts="reportsFilterOpts"></div>

        </div>
    </div>
    <div lergo-paging page="filterPage" on-change="loadReports()"></div>
</div>
